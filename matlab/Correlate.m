%% INPUT: a sequence of rx data
%% Type: 1 short, 2 long, 3 cp+long, 0 self-defined seq
function [] = Correlate(rxdata, type, seq)
  
  % 11a style
  short = [
   0.0460 + 0.0460i;
  -0.1324 + 0.0023i;
  -0.0135 - 0.0785i;
   0.1428 - 0.0127i;
   0.0920          ;
   0.1428 - 0.0127i;
  -0.0135 - 0.0785i;
  -0.1324 + 0.0023i;
   0.0460 + 0.0460i;
   0.0023 - 0.1324i;
  -0.0785 - 0.0135i;
  -0.0127 + 0.1428i;
        0 + 0.0920i;
  -0.0127 + 0.1428i;
  -0.0785 - 0.0135i;
   0.0023 - 0.1324i
   ];

cp = [
   -0.1562          ;
   0.0123 - 0.0976i;
   0.0917 - 0.1059i;
  -0.0919 - 0.1151i;
  -0.0028 - 0.0538i;
   0.0751 + 0.0740i;
  -0.1273 + 0.0205i;
  -0.1219 + 0.0166i;
  -0.0350 + 0.1509i;
  -0.0565 + 0.0218i;
  -0.0603 - 0.0813i;
   0.0696 - 0.0141i;
   0.0822 - 0.0924i;
  -0.1313 - 0.0652i;
  -0.0572 - 0.0393i;
   0.0369 - 0.0983i;
   0.0625 + 0.0625i;
   0.1192 + 0.0041i;
  -0.0225 - 0.1607i;
   0.0587 + 0.0149i;
   0.0245 + 0.0585i;
  -0.1368 + 0.0474i;
   0.0010 + 0.1150i;
   0.0533 - 0.0041i;
   0.0975 + 0.0259i;
  -0.0383 + 0.1062i;
  -0.1151 + 0.0552i;
   0.0598 + 0.0877i;
   0.0211 - 0.0279i;
   0.0968 - 0.0828i;
   0.0397 + 0.1112i;
  -0.0051 + 0.1203i
  ];

  long = [
    0.1562         ;
  -0.0051 - 0.1203i;
   0.0397 - 0.1112i;
   0.0968 + 0.0828i;
   0.0211 + 0.0279i;
   0.0598 - 0.0877i;
  -0.1151 - 0.0552i;
  -0.0383 - 0.1062i;
   0.0975 - 0.0259i;
   0.0533 + 0.0041i;
   0.0010 - 0.1150i;
  -0.1368 - 0.0474i;
   0.0245 - 0.0585i;
   0.0587 - 0.0149i;
  -0.0225 + 0.1607i;
   0.1192 - 0.0041i;
   0.0625 - 0.0625i;
   0.0369 + 0.0983i;
  -0.0572 + 0.0393i;
  -0.1313 + 0.0652i;
   0.0822 + 0.0924i;
   0.0696 + 0.0141i;
  -0.0603 + 0.0813i;
  -0.0565 - 0.0218i;
  -0.0350 - 0.1509i;
  -0.1219 - 0.0166i;
  -0.1273 - 0.0205i;
   0.0751 - 0.0740i;
  -0.0028 + 0.0538i;
  -0.0919 + 0.1151i;
   0.0917 + 0.1059i;
   0.0123 + 0.0976i;
  -0.1562          ;
   0.0123 - 0.0976i;
   0.0917 - 0.1059i;
  -0.0919 - 0.1151i;
  -0.0028 - 0.0538i;
   0.0751 + 0.0740i;
  -0.1273 + 0.0205i;
  -0.1219 + 0.0166i;
  -0.0350 + 0.1509i;
  -0.0565 + 0.0218i;
  -0.0603 - 0.0813i;
   0.0696 - 0.0141i;
   0.0822 - 0.0924i;
  -0.1313 - 0.0652i;
  -0.0572 - 0.0393i;
   0.0369 - 0.0983i;
   0.0625 + 0.0625i;
   0.1192 + 0.0041i;
  -0.0225 - 0.1607i;
   0.0587 + 0.0149i;
   0.0245 + 0.0585i;
  -0.1368 + 0.0474i;
   0.0010 + 0.1150i;
   0.0533 - 0.0041i;
   0.0975 + 0.0259i;
  -0.0383 + 0.1062i;
  -0.1151 + 0.0552i;
   0.0598 + 0.0877i;
   0.0211 - 0.0279i;
   0.0968 - 0.0828i;
   0.0397 + 0.1112i;
  -0.0051 + 0.1203i
  ];

  if type == 1
      signal = short;
  elseif type == 2
      signal = long;
  elseif type == 3
      signal = [cp; long];
  elseif type == 0
      signal = seq;
  end
  
  conv_res = filter(conj(signal(end:-1:1)), 1, rxdata);
  conv_res = abs(conv_res);
  figure;
  plot(conv_res,'b.-');

end
